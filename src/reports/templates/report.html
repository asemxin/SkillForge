{% extends "base.html" %}

{% block title %}{{ title }} - SkillForge{% endblock %}

{% block content %}
<article class="report">
    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-badge">
                <span class="badge-icon">ğŸ“Š</span>
                <span class="badge-text">{{ skill_name }}</span>
            </div>
            <h1 class="hero-title">{{ title }}</h1>
            <p class="hero-meta">
                <span class="meta-item">
                    <span class="meta-icon">ğŸ“…</span>
                    {{ report_date }}
                </span>
                <span class="meta-divider">â€¢</span>
                <span class="meta-item">
                    <span class="meta-icon">â±ï¸</span>
                    æ‰§è¡Œè€—æ—¶ {{ duration }}
                </span>
                <span class="meta-divider">â€¢</span>
                <span class="meta-item">
                    <span class="meta-icon">ğŸ¤–</span>
                    {{ backend }}
                </span>
            </p>
        </div>
    </section>

    <!-- Summary Section -->
    {% if summary %}
    <section class="summary-section">
        <div class="container">
            <div class="summary-card">
                <div class="summary-header">
                    <h2>ğŸ“Œ æ ¸å¿ƒæ´å¯Ÿ</h2>
                </div>
                <div class="summary-content markdown-body">
                    {{ summary | safe }}
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Topics Section -->
    {% if topics %}
    <section class="topics-section">
        <div class="container">
            <h2 class="section-title">ğŸ”¥ çƒ­ç‚¹è¯¦æƒ…</h2>
            <div class="topics-grid">
                {% for topic in topics %}
                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-rank">#{{ topic.rank }}</span>
                        <div class="topic-badges">
                            {% if topic.is_hot %}
                            <span class="badge badge-hot">ğŸ”¥ çƒ­</span>
                            {% endif %}
                            {% if topic.is_new %}
                            <span class="badge badge-new">âœ¨ æ–°</span>
                            {% endif %}
                        </div>
                    </div>
                    <h3 class="topic-title">{{ topic.title }}</h3>
                    <div class="topic-meta">
                        <span class="topic-category">{{ topic.category or 'ç»¼åˆ' }}</span>
                        <span class="topic-heat">ğŸ”¥ {{ "{:,}".format(topic.hot_value) }}</span>
                    </div>
                    {% if topic.analysis %}
                    <div class="topic-analysis">
                        {% if topic.analysis.sentiment %}
                        <div class="sentiment-badge sentiment-{{ topic.analysis.sentiment }}">
                            {% if topic.analysis.sentiment == 'positive' %}ğŸ˜Š æ­£é¢
                            {% elif topic.analysis.sentiment == 'negative' %}ğŸ˜” è´Ÿé¢
                            {% else %}ğŸ˜ ä¸­æ€§
                            {% endif %}
                        </div>
                        {% endif %}

                        {% if topic.analysis.background %}
                        <div class="analysis-item">
                            <h4>ğŸ“– èƒŒæ™¯</h4>
                            <p>{{ topic.analysis.background }}</p>
                        </div>
                        {% endif %}

                        {% if topic.analysis.hot_reason %}
                        <div class="analysis-item">
                            <h4>ğŸ¯ çƒ­åº¦åŸå› </h4>
                            <p>{{ topic.analysis.hot_reason }}</p>
                        </div>
                        {% endif %}

                        {% if topic.analysis.keywords %}
                        <div class="analysis-keywords">
                            {% for keyword in topic.analysis.keywords[:5] %}
                            <span class="keyword-tag">#{{ keyword }}</span>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Stats Section -->
    <section class="stats-section">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-value">{{ total_count }}</span>
                    <span class="stat-label">çƒ­æœæ€»æ•°</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">{{ analyzed_count }}</span>
                    <span class="stat-label">æ·±åº¦åˆ†æ</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">{{ duration }}</span>
                    <span class="stat-label">æ‰§è¡Œè€—æ—¶</span>
                </div>
            </div>
        </div>
    </section>
</article>
{% endblock %}